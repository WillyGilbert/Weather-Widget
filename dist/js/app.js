"use strict";var appid="0f6616aa0f2759bb060a75b5cabbd0ac";function getCurrentWeather(t,e){return fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(t,"&lon=").concat(e,"&appid=").concat(appid,"&units=metric")).then(function(t){return t.json()}).then(function(t){return drawCurrentWeather(t.main.temp,t.weather[0].description,t.weather[0].icon)})}function drawCurrentWeather(t,e,n){return'<h2>Current Conditions</h2>\n     <img src="http://openweathermap.org/img/wn/'.concat(n,'@2x.png"/>\n     <div class="current">\n      <div class="temp">').concat(Math.round(t),'℃</div>\n      <div class="condition">').concat(e,"</div>\n    </div>")}function getWeatherForecast(t,e){return fetch("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(t,"&lon=").concat(e,"&appid=").concat(appid,"&units=metric")).then(function(t){return t.json()}).then(function(t){return getNextForecasts(t.list.slice(0))})}function getNextForecasts(t){var e=new Date,n=[],a=t.reduce(function(t,e){return t[new Date(e.dt_txt).getDate()]=(t[new Date(e.dt_txt).getDate()]||0)+1,t},{}),r=Object.keys(a).map(function(t){return[Number(t),a[t]]}),c=0;r[0][0]===e.getDate()&&(t.splice(0,r[0][1]),c++);for(var o=0,i=0;i<5;i++)n.push(getHighestAndLowestTemp(t.splice(0,r[c++][1]),getNextDays(e.getDay())[o++]));return n}function getNextDays(t){for(var e=t,n=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],a=[],r=1;r<=5;r++)6<e&&(e=0),a.push(n[e++]);return a}function getHighestAndLowestTemp(t,e){var n=t[0].main.temp_max,a=t[0].main.temp_min,r=t[0].weather[0].description,c=t[0].weather[0].icon;return t.forEach(function(t){"12:00:00"===t.dt_txt.substring(11,19)&&(r=t.weather[0].description,c=t.weather[0].icon),t.main.temp_max>n&&(n=t.main.temp_max),t.main.temp_min<a&&(a=t.main.temp_min)}),drawWeatherForecast(n,a,r,c,e)}function drawWeatherForecast(t,e,n,a,r){return'\n    <div class="day">\n    <h3>'.concat(r,'</h3>\n    <img src="http://openweathermap.org/img/wn/').concat(a,'@2x.png" />\n    <div class="description">').concat(n,'</div>\n    <div class="temp">\n      <span class="high">').concat(Math.round(t),'℃</span>/<span class="low">').concat(Math.round(e),"℃</span>\n    </div>\n    </div> \n  ")}navigator.geolocation.getCurrentPosition(function(t){var e=getCurrentWeather(t.coords.latitude,t.coords.longitude),n=getWeatherForecast(t.coords.latitude,t.coords.longitude);Promise.all([e,n]).then(function(t){var e=document.querySelector(".current-conditions"),n=document.querySelector(".forecast");e.innerHTML=t[0],t[1].forEach(function(t){n.innerHTML+=t})})});